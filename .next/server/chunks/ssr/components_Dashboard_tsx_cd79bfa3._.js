module.exports=[49980,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=a=>a.replace(/([A-Z])/g," $1").replace(/[_-]/g," ").replace(/\s+/g," ").trim().replace(/\b\w/g,a=>a.toUpperCase()),e=a=>a.replace(/([A-Z])/g," $1").replace(/[_-]/g," ").replace(/\s+/g," ").trim().replace(/\b\w/g,a=>a.toUpperCase()),f=a=>{for(let b of["fullName","firstName","candidateName","name","title","email"])if(a[b])return String(a[b]);return"Unknown"},g=a=>String(a.email??a.mail??a.Email??""),h=a=>"string"==typeof a&&(a.startsWith("data:image")||a.startsWith("/9j/")||a.startsWith("iVBOR")||a.length>200&&/^[A-Za-z0-9+/=]+$/.test(a.slice(0,100))),i=a=>a.checkedIn?"checked_in":String(a.status??"pending");async function j(a,b,c){let d={method:a,headers:{"Content-Type":"application/json"}};c&&(d.body=JSON.stringify(c));let e=await fetch("/api"+b,d);if(!e.ok)throw Error((await e.json().catch(()=>({error:e.statusText}))).error||e.statusText);return e.json()}function k(a){return JSON.parse(JSON.stringify(a))}function l({status:a}){let c={pending:"pending",approved:"approved",rejected:"rejected",checked_in:"checked_in"}[a]??"",d="checked_in"===a?"Checked In":a?a.charAt(0).toUpperCase()+a.slice(1):"Pending";return(0,b.jsx)("span",{className:`status-pill ${c}`,children:d})}function m({toasts:a}){let c={success:"check-circle",error:"exclamation-circle",info:"info-circle"},d={success:"var(--green)",error:"var(--red)",info:"var(--accent)"};return(0,b.jsx)("div",{id:"toast-container",children:a.map(a=>(0,b.jsxs)("div",{className:`toast ${a.type}`,children:[(0,b.jsx)("i",{className:`fas fa-${c[a.type]}`,style:{color:d[a.type]}}),(0,b.jsx)("span",{children:a.msg})]},a.id))})}function n({show:a,text:c}){return(0,b.jsxs)("div",{className:`loading-overlay${a?" show":""}`,children:[(0,b.jsx)("div",{className:"spinner"}),(0,b.jsx)("span",{style:{color:"var(--muted)",fontSize:14},children:c})]})}function o({src:a,onClose:c}){return a?(0,b.jsxs)("div",{className:"img-modal open",onClick:c,children:[(0,b.jsx)("span",{className:"img-modal-close",children:"Ã—"}),(0,b.jsx)("img",{src:a,alt:"Preview"})]}):null}function p({stats:a}){return(0,b.jsx)("div",{className:"stats-grid",children:[{cls:"total",icon:"users",val:a.total,lbl:"Total"},{cls:"approved",icon:"check-circle",val:a.approved,lbl:"Approved"},{cls:"pending",icon:"clock",val:a.pending,lbl:"Pending"},{cls:"rejected",icon:"times-circle",val:a.rejected,lbl:"Rejected"},{cls:"checked",icon:"sign-in-alt",val:a.checkedIn,lbl:"Checked In"}].map(a=>(0,b.jsxs)("div",{className:`stat-card ${a.cls}`,children:[(0,b.jsx)("div",{className:"stat-icon",children:(0,b.jsx)("i",{className:`fas fa-${a.icon}`})}),(0,b.jsx)("div",{className:"stat-val",children:a.val}),(0,b.jsx)("div",{className:"stat-lbl",children:a.lbl})]},a.cls))})}function q({doc:a,onApprove:e,onOpenReject:g,onEdit:j,onDelete:k}){let[m,n]=(0,c.useState)(""),p=f(a),q=i(a),r=!a.status||"pending"===a.status,s="approved"===a.status,t="rejected"===a.status,u=Object.entries(a).filter(([a,b])=>"_id"!==a&&"qrCode"!==a&&!(/screenshot|image|photo|picture|img|payment|receipt|signature|avatar|profile/i.test(a)&&h(b))),v=Object.entries(a).filter(([a,b])=>/screenshot|image|photo|picture|img|payment|receipt|signature|avatar|profile/i.test(a)&&h(b));return(0,b.jsxs)(b.Fragment,{children:[m&&(0,b.jsx)(o,{src:m,onClose:()=>n("")}),(0,b.jsxs)("div",{className:"detail-card",children:[(0,b.jsxs)("div",{className:"detail-header",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"detail-name",children:p}),(0,b.jsx)("div",{style:{marginTop:4},children:(0,b.jsx)(l,{status:q})}),t&&null!=a.rejectionReason&&(0,b.jsxs)("div",{style:{marginTop:8,fontSize:13,color:"var(--red)"},children:[(0,b.jsx)("i",{className:"fas fa-info-circle"})," Reason: ",String(a.rejectionReason)]})]}),(0,b.jsxs)("div",{className:"detail-actions",children:[r&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{className:"btn btn-success",onClick:()=>e(String(a._id)),children:[(0,b.jsx)("i",{className:"fas fa-check"})," Approve"]}),(0,b.jsxs)("button",{className:"btn btn-danger",onClick:()=>g(String(a._id)),children:[(0,b.jsx)("i",{className:"fas fa-times"})," Reject"]})]}),s&&!a.checkedIn&&(0,b.jsxs)("div",{style:{color:"var(--muted)",fontSize:13},children:[(0,b.jsx)("i",{className:"fas fa-check-circle",style:{color:"var(--green)"}})," Approved â€“ waiting check-in"]}),t&&(0,b.jsxs)("div",{style:{color:"var(--red)",fontSize:13},children:[(0,b.jsx)("i",{className:"fas fa-times-circle"})," Rejected"]}),(0,b.jsxs)("button",{className:"btn btn-ghost btn-sm",onClick:()=>j(String(a._id)),children:[(0,b.jsx)("i",{className:"fas fa-edit"})," Edit"]}),(0,b.jsx)("button",{className:"btn btn-ghost btn-sm",style:{color:"var(--red)"},onClick:()=>k(String(a._id)),children:(0,b.jsx)("i",{className:"fas fa-trash"})})]})]}),(0,b.jsxs)("div",{className:"detail-body",children:[(0,b.jsx)("div",{className:"fields-grid",children:u.map(([a,c])=>{let e;if(null==c)e=(0,b.jsx)("em",{style:{color:"var(--muted)"},children:"â€”"});else if("object"==typeof c)e=(0,b.jsx)("code",{style:{fontSize:11,background:"var(--bg)",padding:"4px 8px",borderRadius:4,display:"block",overflowX:"auto"},children:JSON.stringify(c,null,2)});else if("boolean"==typeof c)e=(0,b.jsx)("span",{style:{color:c?"var(--green)":"var(--red)"},children:c?"Yes":"No"});else{let a=String(c);e=a.length>200?a.substring(0,200)+"â€¦":a}return(0,b.jsxs)("div",{className:"field-item",children:[(0,b.jsx)("div",{className:"field-label",children:d(a)}),(0,b.jsx)("div",{className:"field-value",children:e})]},a)})}),null!=a.qrCode&&(0,b.jsxs)("div",{className:"qr-section",children:[(0,b.jsx)("img",{className:"qr-img",src:String(a.qrCode),alt:"QR Code",onClick:()=>n(String(a.qrCode))}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{style:{fontFamily:"Syne,sans-serif",fontWeight:700,marginBottom:6},children:"Entry QR Code"}),(0,b.jsx)("p",{style:{fontSize:13,color:"var(--muted)",marginBottom:12},children:"Attendee uses this to check in"}),null!=a.checkInTime&&(0,b.jsxs)("div",{style:{fontSize:12,color:"var(--blue)"},children:[(0,b.jsx)("i",{className:"fas fa-clock"})," Checked in: ",new Date(String(a.checkInTime)).toLocaleString()]}),(0,b.jsxs)("a",{className:"btn btn-ghost btn-sm",style:{marginTop:10,display:"inline-flex"},download:`qr_${String(a._id)}.png`,href:String(a.qrCode),children:[(0,b.jsx)("i",{className:"fas fa-download"})," Download QR"]})]})]}),v.map(([a,c])=>{let e=String(c).startsWith("data:")?String(c):"data:image/jpeg;base64,"+String(c);return(0,b.jsxs)("div",{className:"img-preview",children:[(0,b.jsxs)("div",{style:{fontFamily:"Syne,sans-serif",fontWeight:700,marginBottom:12,fontSize:14},children:[(0,b.jsx)("i",{className:"fas fa-image",style:{color:"var(--accent)"}})," ",d(a)]}),(0,b.jsx)("img",{src:e,onClick:()=>n(e),alt:a}),(0,b.jsxs)("div",{className:"img-actions",children:[(0,b.jsxs)("button",{className:"btn btn-ghost btn-sm",onClick:()=>n(e),children:[(0,b.jsx)("i",{className:"fas fa-expand"})," View"]}),(0,b.jsxs)("a",{className:"btn btn-ghost btn-sm",download:`${a}_${Date.now()}.png`,href:e,children:[(0,b.jsx)("i",{className:"fas fa-download"})," Download"]})]})]},a)})]})]})]})}function r({onToast:e}){let[h,i]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(""),p=(0,c.useRef)(null),q=(0,c.useCallback)(async()=>{i(!1),p.current&&(await p.current.stop().catch(()=>{}),p.current=null)},[]),r=(0,c.useCallback)(async()=>{let{Html5Qrcode:b}=await a.A(87545);i(!0);let c=new b("qr-reader");p.current=c,c.start({facingMode:"environment"},{fps:10,qrbox:250},async a=>{await q(),s(a)},()=>{}).catch(a=>{e("Camera error: "+String(a),"error"),q()})},[q]);(0,c.useEffect)(()=>()=>{q()},[q]);let s=async a=>{m((0,b.jsx)("div",{style:{textAlign:"center",padding:24},children:(0,b.jsx)("div",{className:"spinner",style:{margin:"auto"}})}));try{let c=await j("POST","/scan",{qrData:a}),e=k(c.document),h=f(e),i=g(e),l=!!e.checkedIn;m((0,b.jsxs)("div",{className:"scan-result success",children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:12},children:[(0,b.jsx)("i",{className:"fas fa-user-circle",style:{fontSize:36,color:"var(--accent)"}}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"scan-attendee-name",children:h}),i&&(0,b.jsx)("div",{style:{fontSize:13,color:"var(--muted)"},children:i})]})]}),(0,b.jsxs)("div",{className:`checkin-status ${l?"in":"out"}`,children:[(0,b.jsx)("i",{className:`fas fa-${l?"check-circle":"clock"}`}),l?`Already Checked In at ${new Date(String(e.checkInTime)).toLocaleTimeString()}`:"Not Yet Checked In"]}),(0,b.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:16},children:Object.entries(e).filter(([a])=>"_id"!==a&&"qrCode"!==a&&"qrToken"!==a&&!/screenshot|image|photo|picture|img|payment|receipt|signature|avatar|profile/i.test(a)).slice(0,8).map(([a,c])=>(0,b.jsxs)("div",{style:{background:"var(--surface2)",borderRadius:8,padding:"8px 12px"},children:[(0,b.jsx)("div",{style:{fontSize:10,color:"var(--muted)",textTransform:"uppercase"},children:d(a)}),(0,b.jsx)("div",{style:{fontSize:13},children:null==c?"â€”":String(c).substring(0,40)})]},a))}),l?(0,b.jsxs)("div",{style:{color:"var(--green)",textAlign:"center",fontWeight:600},children:[(0,b.jsx)("i",{className:"fas fa-check-circle"})," Already Checked In"]}):(0,b.jsxs)("button",{className:"btn btn-success",style:{width:"100%"},onClick:()=>t(String(e._id),c.db,c.collection,a),children:[(0,b.jsx)("i",{className:"fas fa-sign-in-alt"})," Confirm Check-In"]})]}))}catch(a){m((0,b.jsxs)("div",{className:"scan-result error",children:[(0,b.jsxs)("div",{style:{color:"var(--red)",fontFamily:"Syne,sans-serif",fontWeight:700,marginBottom:8},children:[(0,b.jsx)("i",{className:"fas fa-times-circle"})," Invalid QR Code"]}),(0,b.jsx)("p",{style:{fontSize:13,color:"var(--muted)"},children:a.message})]}))}},t=async(a,b,c,d)=>{try{await j("POST","/checkin",{id:a,db:b,collection:c}),e("âœ… Check-in successful!","success"),await s(d)}catch(a){e(a.message,"error")}},u=async()=>{n.trim()?await s(n.trim()):e("Enter QR data","error")};return(0,b.jsxs)("div",{className:"scanner-panel",children:[(0,b.jsxs)("h2",{style:{fontFamily:"Syne,sans-serif",fontSize:24,marginBottom:24,alignSelf:"flex-start"},children:[(0,b.jsx)("i",{className:"fas fa-qrcode",style:{color:"var(--accent)"}})," QR Check-In Scanner"]}),(0,b.jsxs)("div",{className:"scanner-box",children:[(0,b.jsxs)("div",{className:"scanner-head",children:[(0,b.jsx)("i",{className:"fas fa-camera"})," Point camera at attendee QR code"]}),(0,b.jsx)("div",{id:"qr-reader"}),(0,b.jsx)("div",{style:{padding:16,display:"flex",gap:10,justifyContent:"center"},children:h?(0,b.jsxs)("button",{className:"btn btn-ghost",onClick:q,children:[(0,b.jsx)("i",{className:"fas fa-stop"})," Stop"]}):(0,b.jsxs)("button",{className:"btn btn-primary",onClick:r,children:[(0,b.jsx)("i",{className:"fas fa-play"})," Start Camera"]})})]}),(0,b.jsxs)("div",{style:{width:"100%",maxWidth:500,background:"var(--card)",border:"1px solid var(--border)",borderRadius:16,padding:20,marginBottom:24},children:[(0,b.jsxs)("div",{style:{fontFamily:"Syne,sans-serif",fontWeight:700,marginBottom:12,fontSize:15},children:[(0,b.jsx)("i",{className:"fas fa-keyboard",style:{color:"var(--accent)"}})," Manual QR Data Entry"]}),(0,b.jsx)("input",{type:"text",className:"form-input",placeholder:"Paste QR JSON or token here",value:n,onChange:a=>o(a.target.value)}),(0,b.jsxs)("button",{className:"btn btn-primary",style:{marginTop:10,width:"100%"},onClick:u,children:[(0,b.jsx)("i",{className:"fas fa-search"})," Lookup"]})]}),(0,b.jsx)("div",{style:{width:"100%",maxWidth:500},children:l})]})}function s(){let[o,s]=(0,c.useState)({db:"",col:"",docs:[],filtered:[],selected:null,details:null,rejectTargetId:null,editingDoc:null,deleteTargetId:null}),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)("Loading..."),[F,G]=(0,c.useState)("records"),[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)({reject:!1,doc:!1,delete:!1}),T=(0,c.useRef)(null),U=(0,c.useCallback)((a,b="info")=>{let c=Date.now();I(d=>[...d,{id:c,msg:a,type:b}]),setTimeout(()=>I(a=>a.filter(a=>a.id!==c)),3500)},[]),V=(a="Loading...")=>{E(a),C(!0)},W=a=>S(b=>({...b,[a]:!0})),X=a=>S(b=>({...b,[a]:!1}));(0,c.useEffect)(()=>{(async()=>{try{let a=await j("GET","/databases");u(a),A(!0)}catch(a){A(!1),U("Cannot connect to server: "+a.message,"error")}})()},[U]);let Y=(0,c.useCallback)((a,b,c)=>a.filter(a=>{let d=f(a).toLowerCase(),e=g(a).toLowerCase(),h=!b||d.includes(b)||e.includes(b)||String(a.registrationId??"").includes(b),j=i(a);return h&&(!c||j===c)}),[]);(0,c.useEffect)(()=>{s(a=>({...a,filtered:Y(a.docs,J,L)}))},[J,L,Y]);let Z=async a=>{if(aj(),s(b=>({...b,db:a,col:"",docs:[],filtered:[],selected:null,details:null})),w([]),y(null),a)try{let b=await j("GET",`/databases/${a}/collections`);w(b)}catch(a){U(a.message,"error")}},$=async a=>{aj(),s(b=>({...b,col:a,selected:null,docs:[]})),y(null),a&&(await _(o.db,a),await aa(o.db,a),ai(o.db,a))},_=async(a,b)=>{V("Fetching records...");try{let c=(await j("GET",`/databases/${a}/collections/${b}/documents`)).map(k).sort((a,b)=>{let c=String(a.registrationId??a.regId??a.registerNumber??""),d=String(b.registrationId??b.regId??b.registerNumber??"");return c.localeCompare(d,void 0,{numeric:!0})});s(a=>({...a,docs:c,filtered:Y(c,J,L)}))}catch(a){U(a.message,"error")}finally{C(!1)}},aa=async(a,b)=>{try{let c=await j("GET",`/databases/${a}/collections/${b}/stats`);y(c)}catch{}},ab=async a=>{s(b=>({...b,selected:b.docs.find(b=>String(b._id)===a)??null})),V("Loading details...");try{let b=k(await j("GET",`/databases/${o.db}/collections/${o.col}/documents/${a}`));s(a=>({...a,details:b}))}catch(a){U(a.message,"error")}finally{C(!1)}},ac=async a=>{V("Generating QR & sending email...");try{await j("POST",`/databases/${o.db}/collections/${o.col}/documents/${a}/approve`),U("Approved! QR sent to attendee.","success"),await _(o.db,o.col),await aa(o.db,o.col),await ab(a)}catch(a){U(a.message,"error")}finally{C(!1)}},ad=async()=>{if(!N.trim())return void U("Please enter a reason","error");X("reject"),V("Rejecting & sending email...");try{await j("POST",`/databases/${o.db}/collections/${o.col}/documents/${o.rejectTargetId}/reject`,{reason:N}),U("Rejected. Email sent to attendee.","info"),await _(o.db,o.col),await aa(o.db,o.col),o.rejectTargetId&&await ab(o.rejectTargetId)}catch(a){U(a.message,"error")}finally{C(!1)}},ae=async a=>{V("Loading...");try{let b=k(await j("GET",`/databases/${o.db}/collections/${o.col}/documents/${a}`));s(a=>({...a,editingDoc:b}));let c={...b};delete c._id,Object.keys(c).forEach(a=>{/screenshot|image|photo|picture|img|payment|receipt|signature|avatar|profile/i.test(a)&&h(c[a])&&(c[a]="[IMAGE DATA PRESERVED]")}),Q(JSON.stringify(c,null,2)),W("doc")}catch(a){U(a.message,"error")}finally{C(!1)}},af=async()=>{let a;try{a=JSON.parse(P)}catch(a){U("Invalid JSON: "+a.message,"error");return}o.editingDoc&&Object.keys(a).forEach(b=>{"[IMAGE DATA PRESERVED]"===a[b]&&o.editingDoc[b]&&(a[b]=o.editingDoc[b])}),X("doc"),V("Saving...");try{o.editingDoc?(await j("PUT",`/databases/${o.db}/collections/${o.col}/documents/${String(o.editingDoc._id)}`,a),U("Document updated","success"),await ab(String(o.editingDoc._id))):(await j("POST",`/databases/${o.db}/collections/${o.col}/documents`,a),U("Document created","success")),await _(o.db,o.col),await aa(o.db,o.col)}catch(a){U(a.message,"error")}finally{C(!1)}},ag=async()=>{X("delete"),V("Deleting...");try{await j("DELETE",`/databases/${o.db}/collections/${o.col}/documents/${o.deleteTargetId}`),U("Document deleted","info"),s(a=>({...a,selected:null,details:null})),await _(o.db,o.col),await aa(o.db,o.col)}catch(a){U(a.message,"error")}finally{C(!1)}},ah=async()=>{let b=await a.A(98516),c=o.docs;if(!c.length)return;let e=Object.keys(c[0]).filter(a=>!/screenshot|image|photo|picture|img|payment|receipt|signature|avatar|profile/i.test(a)),f=[e.map(d),...c.map(a=>e.map(b=>{let c=a[b];return null==c?"":"object"==typeof c?JSON.stringify(c):String(c)}))],g=b.utils.book_new();b.utils.book_append_sheet(g,b.utils.aoa_to_sheet(f),o.col.substring(0,31)),b.writeFile(g,`${o.col}_${new Date().toISOString().split("T")[0]}.xlsx`),U("Exported successfully","success")},ai=(a,b)=>{T.current=setInterval(async()=>{if(a&&b)try{let c=(await j("GET",`/databases/${a}/collections/${b}/documents`)).map(k);s(a=>JSON.stringify(c.map(a=>a._id))!==JSON.stringify(a.docs.map(a=>a._id))?{...a,docs:c,filtered:Y(c,J,L)}:a);let d=await j("GET",`/databases/${a}/collections/${b}/stats`).catch(()=>null);d&&y(d)}catch{}},3e4)},aj=()=>{T.current&&(clearInterval(T.current),T.current=null)};(0,c.useEffect)(()=>()=>aj(),[]);let ak=!!o.col&&o.docs.length>0;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n,{show:B,text:D}),(0,b.jsx)(m,{toasts:H}),(0,b.jsxs)("header",{className:"header",children:[(0,b.jsxs)("div",{className:"logo",children:[(0,b.jsx)("div",{className:"logo-icon",children:(0,b.jsx)("i",{className:"fas fa-bolt"})}),"EventManager Pro"]}),(0,b.jsxs)("div",{className:"header-selects",children:[(0,b.jsxs)("select",{value:o.db,onChange:a=>Z(a.target.value),children:[(0,b.jsx)("option",{value:"",children:"Select Database"}),t.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsxs)("select",{value:o.col,onChange:a=>$(a.target.value),disabled:!o.db,children:[(0,b.jsx)("option",{value:"",children:"Select Collection"}),v.map(a=>(0,b.jsx)("option",{value:a,children:e(a)},a))]})]}),(0,b.jsxs)("div",{className:"header-right",children:[(0,b.jsxs)("button",{className:"btn btn-ghost btn-sm",onClick:ah,disabled:!ak,children:[(0,b.jsx)("i",{className:"fas fa-download"})," Export"]}),(0,b.jsxs)("button",{className:"btn btn-primary btn-sm",onClick:()=>{s(a=>({...a,editingDoc:null})),Q('{\n  "name": "",\n  "email": "",\n  "eventName": ""\n}'),W("doc")},disabled:!o.col,children:[(0,b.jsx)("i",{className:"fas fa-plus"})," Add"]}),(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,fontSize:12,color:"var(--muted)"},children:[(0,b.jsx)("div",{className:`status-dot ${z?"connected":"disconnected"}`}),(0,b.jsx)("span",{children:z?"Connected":"Disconnected"})]})]})]}),(0,b.jsx)("nav",{className:"nav-tabs",children:["records","scanner"].map(a=>(0,b.jsxs)("button",{className:`nav-tab${F===a?" active":""}`,onClick:()=>G(a),children:[(0,b.jsx)("i",{className:`fas fa-${"records"===a?"table":"qrcode"}`}),"records"===a?"Records":"QR Scanner"]},a))}),(0,b.jsxs)("div",{className:"main",children:[(0,b.jsxs)("div",{className:`panel${"records"===F?" active":""}`,id:"panel-records",children:[(0,b.jsxs)("aside",{className:"sidebar",children:[(0,b.jsxs)("div",{className:"sidebar-head",children:[(0,b.jsx)("span",{className:"sidebar-title",children:o.col?e(o.col):"All Records"}),(0,b.jsx)("span",{className:"badge",children:o.filtered.length})]}),(0,b.jsx)("div",{style:{padding:12,borderBottom:"1px solid var(--border)",display:"flex",gap:6},children:(0,b.jsxs)("select",{value:L,onChange:a=>M(a.target.value),style:{flex:1,minWidth:0,fontSize:12,padding:"6px 10px"},children:[(0,b.jsx)("option",{value:"",children:"All Status"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"approved",children:"Approved"}),(0,b.jsx)("option",{value:"rejected",children:"Rejected"}),(0,b.jsx)("option",{value:"checked_in",children:"Checked In"})]})}),(0,b.jsx)("div",{className:"search-wrap",children:(0,b.jsx)("input",{type:"text",placeholder:"ðŸ” Search...",value:J,onChange:a=>K(a.target.value)})}),(0,b.jsx)("ul",{className:"list",children:0===o.filtered.length?(0,b.jsxs)("li",{className:"empty",children:[(0,b.jsx)("i",{className:"fas fa-inbox"}),(0,b.jsx)("br",{}),o.col?"No records found":"Select a collection"]}):o.filtered.map(a=>{let c=f(a),d=g(a),e=String(a.registrationId??a.regId??a.registerNumber??""),h=i(a),j=String(o.selected?._id)===String(a._id);return(0,b.jsxs)("li",{className:`list-item${j?" active":""}`,onClick:()=>ab(String(a._id)),children:[(0,b.jsx)("div",{className:"list-item-name",children:c}),d&&(0,b.jsx)("div",{className:"list-item-sub",children:d}),(0,b.jsxs)("div",{className:"list-item-meta",children:[e?(0,b.jsxs)("span",{style:{fontSize:11,color:"var(--muted)"},children:["#",e.substring(0,10)]}):(0,b.jsx)("span",{}),(0,b.jsx)(l,{status:h})]})]},String(a._id))})})]}),(0,b.jsxs)("div",{className:"content",children:[x&&(0,b.jsx)(p,{stats:x}),o.details?(0,b.jsx)(q,{doc:o.details,onApprove:ac,onOpenReject:a=>{s(b=>({...b,rejectTargetId:a})),O(""),W("reject")},onEdit:ae,onDelete:a=>{s(b=>({...b,deleteTargetId:a})),W("delete")}}):o.col?null:(0,b.jsxs)("div",{className:"placeholder",children:[(0,b.jsx)("div",{className:"placeholder-icon",children:(0,b.jsx)("i",{className:"fas fa-database"})}),(0,b.jsx)("h3",{children:"Select a collection to begin"}),(0,b.jsx)("p",{style:{fontSize:14,marginTop:8},children:"Choose a database and collection from the header"})]})]})]}),(0,b.jsx)("div",{className:`panel${"scanner"===F?" active":""}`,id:"panel-scanner",children:"scanner"===F&&(0,b.jsx)(r,{onToast:U})})]}),R.reject&&(0,b.jsx)("div",{className:"modal-overlay open",children:(0,b.jsxs)("div",{className:"modal",children:[(0,b.jsxs)("div",{className:"modal-title",children:[(0,b.jsx)("i",{className:"fas fa-times-circle",style:{color:"var(--red)"}})," Reject Attendee"]}),(0,b.jsx)("p",{style:{color:"var(--muted)",fontSize:14,marginBottom:20},children:"Please provide a reason for rejection. This will be emailed to the attendee."}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Reason for Rejection *"}),(0,b.jsx)("textarea",{className:"form-input",value:N,onChange:a=>O(a.target.value),placeholder:"e.g. Registration incomplete, missing documents, event capacity reached..."})]}),(0,b.jsxs)("div",{className:"modal-actions",children:[(0,b.jsx)("button",{className:"btn btn-ghost",onClick:()=>X("reject"),children:"Cancel"}),(0,b.jsxs)("button",{className:"btn btn-danger",onClick:ad,children:[(0,b.jsx)("i",{className:"fas fa-times"})," Reject & Notify"]})]})]})}),R.doc&&(0,b.jsx)("div",{className:"modal-overlay open",children:(0,b.jsxs)("div",{className:"modal",style:{minWidth:600},children:[(0,b.jsxs)("div",{className:"modal-title",children:[(0,b.jsx)("i",{className:`fas fa-${o.editingDoc?"edit":"plus"}`,style:{color:"var(--accent)"}}),o.editingDoc?"Edit Document":"Add Document"]}),(0,b.jsx)("p",{style:{color:"var(--muted)",fontSize:13,marginBottom:16},children:o.editingDoc?"Edit the JSON. Image fields marked [IMAGE DATA PRESERVED] will remain unchanged.":"Enter fields as JSON key-value pairs"}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"JSON Data"}),(0,b.jsx)("textarea",{className:"form-input",style:{minHeight:200,fontFamily:"monospace",fontSize:13},value:P,onChange:a=>Q(a.target.value)})]}),(0,b.jsxs)("div",{className:"modal-actions",children:[(0,b.jsx)("button",{className:"btn btn-ghost",onClick:()=>X("doc"),children:"Cancel"}),(0,b.jsxs)("button",{className:"btn btn-primary",onClick:af,children:[(0,b.jsx)("i",{className:"fas fa-save"})," Save"]})]})]})}),R.delete&&(0,b.jsx)("div",{className:"modal-overlay open",children:(0,b.jsxs)("div",{className:"modal",children:[(0,b.jsxs)("div",{className:"modal-title",children:[(0,b.jsx)("i",{className:"fas fa-trash",style:{color:"var(--red)"}})," Confirm Delete"]}),(0,b.jsx)("p",{style:{color:"var(--muted)",fontSize:14},children:"Are you sure you want to delete this record? This cannot be undone."}),(0,b.jsxs)("div",{className:"modal-actions",children:[(0,b.jsx)("button",{className:"btn btn-ghost",onClick:()=>X("delete"),children:"Cancel"}),(0,b.jsxs)("button",{className:"btn btn-danger",onClick:ag,children:[(0,b.jsx)("i",{className:"fas fa-trash"})," Delete"]})]})]})})]})}a.s(["default",()=>s])}];

//# sourceMappingURL=components_Dashboard_tsx_cd79bfa3._.js.map