(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75517,e=>{"use strict";var s=e.i(43476),a=e.i(71645);let t=e=>e.replace(/([A-Z])/g," $1").replace(/[_-]/g," ").replace(/\s+/g," ").trim().replace(/\b\w/g,e=>e.toUpperCase()),l=e=>e.replace(/([A-Z])/g," $1").replace(/[_-]/g," ").replace(/\s+/g," ").trim().replace(/\b\w/g,e=>e.toUpperCase()),i=e=>{for(let s of["fullName","firstName","candidateName","name","title","email"])if(e[s])return String(e[s]);return"Unknown"},n=e=>String(e.email??e.mail??e.Email??""),c=e=>"string"==typeof e&&(e.startsWith("data:image")||e.startsWith("/9j/")||e.startsWith("iVBOR")||e.length>200&&/^[A-Za-z0-9+/=]+$/.test(e.slice(0,100))),r=e=>e.checkedIn?"checked_in":String(e.status??"pending");async function d(e,s,a){let t={method:e,headers:{"Content-Type":"application/json"}};a&&(t.body=JSON.stringify(a));let l=await fetch("/api"+s,t);if(!l.ok)throw Error((await l.json().catch(()=>({error:l.statusText}))).error||l.statusText);return l.json()}function o(e){return JSON.parse(JSON.stringify(e))}function m({status:e}){let a={pending:"pending",approved:"approved",rejected:"rejected",checked_in:"checked_in"}[e]??"",t="checked_in"===e?"Checked In":e?e.charAt(0).toUpperCase()+e.slice(1):"Pending";return(0,s.jsx)("span",{className:`status-pill ${a}`,children:t})}function h({toasts:e}){let a={success:"check-circle",error:"exclamation-circle",info:"info-circle"},t={success:"var(--green)",error:"var(--red)",info:"var(--accent)"};return(0,s.jsx)("div",{id:"toast-container",children:e.map(e=>(0,s.jsxs)("div",{className:`toast ${e.type}`,children:[(0,s.jsx)("i",{className:`fas fa-${a[e.type]}`,style:{color:t[e.type]}}),(0,s.jsx)("span",{children:e.msg})]},e.id))})}function u({show:e,text:a}){return(0,s.jsxs)("div",{className:`loading-overlay${e?" show":""}`,children:[(0,s.jsx)("div",{className:"spinner"}),(0,s.jsx)("span",{style:{color:"var(--muted)",fontSize:14},children:a})]})}function g({src:e,onClose:a}){return e?(0,s.jsxs)("div",{className:"img-modal open",onClick:a,children:[(0,s.jsx)("span",{className:"img-modal-close",children:"Ã—"}),(0,s.jsx)("img",{src:e,alt:"Preview"})]}):null}function j({stats:e}){return(0,s.jsx)("div",{className:"stats-grid",children:[{cls:"total",icon:"users",val:e.total,lbl:"Total"},{cls:"approved",icon:"check-circle",val:e.approved,lbl:"Approved"},{cls:"pending",icon:"clock",val:e.pending,lbl:"Pending"},{cls:"rejected",icon:"times-circle",val:e.rejected,lbl:"Rejected"},{cls:"checked",icon:"sign-in-alt",val:e.checkedIn,lbl:"Checked In"}].map(e=>(0,s.jsxs)("div",{className:`stat-card ${e.cls}`,children:[(0,s.jsx)("div",{className:"stat-icon",children:(0,s.jsx)("i",{className:`fas fa-${e.icon}`})}),(0,s.jsx)("div",{className:"stat-val",children:e.val}),(0,s.jsx)("div",{className:"stat-lbl",children:e.lbl})]},e.cls))})}function x({doc:e,onApprove:l,onOpenReject:n,onEdit:d,onDelete:o}){let[h,u]=(0,a.useState)(""),j=i(e),x=r(e),f=!e.status||"pending"===e.status,p="approved"===e.status,v="rejected"===e.status,b=Object.entries(e).filter(([e,s])=>"_id"!==e&&"qrCode"!==e&&!(/screenshot|image|photo|picture|img|payment|receipt|signature|avatar|profile/i.test(e)&&c(s))),y=Object.entries(e).filter(([e,s])=>/screenshot|image|photo|picture|img|payment|receipt|signature|avatar|profile/i.test(e)&&c(s));return(0,s.jsxs)(s.Fragment,{children:[h&&(0,s.jsx)(g,{src:h,onClose:()=>u("")}),(0,s.jsxs)("div",{className:"detail-card",children:[(0,s.jsxs)("div",{className:"detail-header",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"detail-name",children:j}),(0,s.jsx)("div",{style:{marginTop:4},children:(0,s.jsx)(m,{status:x})}),v&&null!=e.rejectionReason&&(0,s.jsxs)("div",{style:{marginTop:8,fontSize:13,color:"var(--red)"},children:[(0,s.jsx)("i",{className:"fas fa-info-circle"})," Reason: ",String(e.rejectionReason)]})]}),(0,s.jsxs)("div",{className:"detail-actions",children:[f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{className:"btn btn-success",onClick:()=>l(String(e._id)),children:[(0,s.jsx)("i",{className:"fas fa-check"})," Approve"]}),(0,s.jsxs)("button",{className:"btn btn-danger",onClick:()=>n(String(e._id)),children:[(0,s.jsx)("i",{className:"fas fa-times"})," Reject"]})]}),p&&!e.checkedIn&&(0,s.jsxs)("div",{style:{color:"var(--muted)",fontSize:13},children:[(0,s.jsx)("i",{className:"fas fa-check-circle",style:{color:"var(--green)"}})," Approved â€“ waiting check-in"]}),v&&(0,s.jsxs)("div",{style:{color:"var(--red)",fontSize:13},children:[(0,s.jsx)("i",{className:"fas fa-times-circle"})," Rejected"]}),(0,s.jsxs)("button",{className:"btn btn-ghost btn-sm",onClick:()=>d(String(e._id)),children:[(0,s.jsx)("i",{className:"fas fa-edit"})," Edit"]}),(0,s.jsx)("button",{className:"btn btn-ghost btn-sm",style:{color:"var(--red)"},onClick:()=>o(String(e._id)),children:(0,s.jsx)("i",{className:"fas fa-trash"})})]})]}),(0,s.jsxs)("div",{className:"detail-body",children:[(0,s.jsx)("div",{className:"fields-grid",children:b.map(([e,a])=>{let l;if(null==a)l=(0,s.jsx)("em",{style:{color:"var(--muted)"},children:"â€”"});else if("object"==typeof a)l=(0,s.jsx)("code",{style:{fontSize:11,background:"var(--bg)",padding:"4px 8px",borderRadius:4,display:"block",overflowX:"auto"},children:JSON.stringify(a,null,2)});else if("boolean"==typeof a)l=(0,s.jsx)("span",{style:{color:a?"var(--green)":"var(--red)"},children:a?"Yes":"No"});else{let e=String(a);l=e.length>200?e.substring(0,200)+"â€¦":e}return(0,s.jsxs)("div",{className:"field-item",children:[(0,s.jsx)("div",{className:"field-label",children:t(e)}),(0,s.jsx)("div",{className:"field-value",children:l})]},e)})}),null!=e.qrCode&&(0,s.jsxs)("div",{className:"qr-section",children:[(0,s.jsx)("img",{className:"qr-img",src:String(e.qrCode),alt:"QR Code",onClick:()=>u(String(e.qrCode))}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontFamily:"Syne,sans-serif",fontWeight:700,marginBottom:6},children:"Entry QR Code"}),(0,s.jsx)("p",{style:{fontSize:13,color:"var(--muted)",marginBottom:12},children:"Attendee uses this to check in"}),null!=e.checkInTime&&(0,s.jsxs)("div",{style:{fontSize:12,color:"var(--blue)"},children:[(0,s.jsx)("i",{className:"fas fa-clock"})," Checked in: ",new Date(String(e.checkInTime)).toLocaleString()]}),(0,s.jsxs)("a",{className:"btn btn-ghost btn-sm",style:{marginTop:10,display:"inline-flex"},download:`qr_${String(e._id)}.png`,href:String(e.qrCode),children:[(0,s.jsx)("i",{className:"fas fa-download"})," Download QR"]})]})]}),y.map(([e,a])=>{let l=String(a).startsWith("data:")?String(a):"data:image/jpeg;base64,"+String(a);return(0,s.jsxs)("div",{className:"img-preview",children:[(0,s.jsxs)("div",{style:{fontFamily:"Syne,sans-serif",fontWeight:700,marginBottom:12,fontSize:14},children:[(0,s.jsx)("i",{className:"fas fa-image",style:{color:"var(--accent)"}})," ",t(e)]}),(0,s.jsx)("img",{src:l,onClick:()=>u(l),alt:e}),(0,s.jsxs)("div",{className:"img-actions",children:[(0,s.jsxs)("button",{className:"btn btn-ghost btn-sm",onClick:()=>u(l),children:[(0,s.jsx)("i",{className:"fas fa-expand"})," View"]}),(0,s.jsxs)("a",{className:"btn btn-ghost btn-sm",download:`${e}_${Date.now()}.png`,href:l,children:[(0,s.jsx)("i",{className:"fas fa-download"})," Download"]})]})]},e)})]})]})]})}function f({onToast:l}){let[c,r]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[u,g]=(0,a.useState)(""),j=(0,a.useRef)(null),x=(0,a.useCallback)(async()=>{r(!1),j.current&&(await j.current.stop().catch(()=>{}),j.current=null)},[]),f=(0,a.useCallback)(async()=>{let{Html5Qrcode:s}=await e.A(87087);r(!0);let a=new s("qr-reader");j.current=a,a.start({facingMode:"environment"},{fps:10,qrbox:250},async e=>{await x(),p(e)},()=>{}).catch(e=>{l("Camera error: "+String(e),"error"),x()})},[x]);(0,a.useEffect)(()=>()=>{x()},[x]);let p=async e=>{h((0,s.jsx)("div",{style:{textAlign:"center",padding:24},children:(0,s.jsx)("div",{className:"spinner",style:{margin:"auto"}})}));try{let a=await d("POST","/scan",{qrData:e}),l=o(a.document),c=i(l),r=n(l),m=!!l.checkedIn;h((0,s.jsxs)("div",{className:"scan-result success",children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:12},children:[(0,s.jsx)("i",{className:"fas fa-user-circle",style:{fontSize:36,color:"var(--accent)"}}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"scan-attendee-name",children:c}),r&&(0,s.jsx)("div",{style:{fontSize:13,color:"var(--muted)"},children:r})]})]}),(0,s.jsxs)("div",{className:`checkin-status ${m?"in":"out"}`,children:[(0,s.jsx)("i",{className:`fas fa-${m?"check-circle":"clock"}`}),m?`Already Checked In at ${new Date(String(l.checkInTime)).toLocaleTimeString()}`:"Not Yet Checked In"]}),(0,s.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:16},children:Object.entries(l).filter(([e])=>"_id"!==e&&"qrCode"!==e&&"qrToken"!==e&&!/screenshot|image|photo|picture|img|payment|receipt|signature|avatar|profile/i.test(e)).slice(0,8).map(([e,a])=>(0,s.jsxs)("div",{style:{background:"var(--surface2)",borderRadius:8,padding:"8px 12px"},children:[(0,s.jsx)("div",{style:{fontSize:10,color:"var(--muted)",textTransform:"uppercase"},children:t(e)}),(0,s.jsx)("div",{style:{fontSize:13},children:null==a?"â€”":String(a).substring(0,40)})]},e))}),m?(0,s.jsxs)("div",{style:{color:"var(--green)",textAlign:"center",fontWeight:600},children:[(0,s.jsx)("i",{className:"fas fa-check-circle"})," Already Checked In"]}):(0,s.jsxs)("button",{className:"btn btn-success",style:{width:"100%"},onClick:()=>v(String(l._id),a.db,a.collection,e),children:[(0,s.jsx)("i",{className:"fas fa-sign-in-alt"})," Confirm Check-In"]})]}))}catch(e){h((0,s.jsxs)("div",{className:"scan-result error",children:[(0,s.jsxs)("div",{style:{color:"var(--red)",fontFamily:"Syne,sans-serif",fontWeight:700,marginBottom:8},children:[(0,s.jsx)("i",{className:"fas fa-times-circle"})," Invalid QR Code"]}),(0,s.jsx)("p",{style:{fontSize:13,color:"var(--muted)"},children:e.message})]}))}},v=async(e,s,a,t)=>{try{await d("POST","/checkin",{id:e,db:s,collection:a}),l("âœ… Check-in successful!","success"),await p(t)}catch(e){l(e.message,"error")}},b=async()=>{u.trim()?await p(u.trim()):l("Enter QR data","error")};return(0,s.jsxs)("div",{className:"scanner-panel",children:[(0,s.jsxs)("h2",{style:{fontFamily:"Syne,sans-serif",fontSize:24,marginBottom:24,alignSelf:"flex-start"},children:[(0,s.jsx)("i",{className:"fas fa-qrcode",style:{color:"var(--accent)"}})," QR Check-In Scanner"]}),(0,s.jsxs)("div",{className:"scanner-box",children:[(0,s.jsxs)("div",{className:"scanner-head",children:[(0,s.jsx)("i",{className:"fas fa-camera"})," Point camera at attendee QR code"]}),(0,s.jsx)("div",{id:"qr-reader"}),(0,s.jsx)("div",{style:{padding:16,display:"flex",gap:10,justifyContent:"center"},children:c?(0,s.jsxs)("button",{className:"btn btn-ghost",onClick:x,children:[(0,s.jsx)("i",{className:"fas fa-stop"})," Stop"]}):(0,s.jsxs)("button",{className:"btn btn-primary",onClick:f,children:[(0,s.jsx)("i",{className:"fas fa-play"})," Start Camera"]})})]}),(0,s.jsxs)("div",{style:{width:"100%",maxWidth:500,background:"var(--card)",border:"1px solid var(--border)",borderRadius:16,padding:20,marginBottom:24},children:[(0,s.jsxs)("div",{style:{fontFamily:"Syne,sans-serif",fontWeight:700,marginBottom:12,fontSize:15},children:[(0,s.jsx)("i",{className:"fas fa-keyboard",style:{color:"var(--accent)"}})," Manual QR Data Entry"]}),(0,s.jsx)("input",{type:"text",className:"form-input",placeholder:"Paste QR JSON or token here",value:u,onChange:e=>g(e.target.value)}),(0,s.jsxs)("button",{className:"btn btn-primary",style:{marginTop:10,width:"100%"},onClick:b,children:[(0,s.jsx)("i",{className:"fas fa-search"})," Lookup"]})]}),(0,s.jsx)("div",{style:{width:"100%",maxWidth:500},children:m})]})}function p(){let[g,p]=(0,a.useState)({db:"",col:"",docs:[],filtered:[],selected:null,details:null,rejectTargetId:null,editingDoc:null,deleteTargetId:null}),[v,b]=(0,a.useState)([]),[y,N]=(0,a.useState)([]),[S,k]=(0,a.useState)(null),[C,w]=(0,a.useState)(!1),[$,T]=(0,a.useState)(!1),[E,R]=(0,a.useState)("Loading..."),[I,D]=(0,a.useState)("records"),[A,_]=(0,a.useState)([]),[O,z]=(0,a.useState)(""),[P,q]=(0,a.useState)(""),[B,J]=(0,a.useState)(""),[W,G]=(0,a.useState)(""),[Q,F]=(0,a.useState)({reject:!1,doc:!1,delete:!1}),L=(0,a.useRef)(null),U=(0,a.useCallback)((e,s="info")=>{let a=Date.now();_(t=>[...t,{id:a,msg:e,type:s}]),setTimeout(()=>_(e=>e.filter(e=>e.id!==a)),3500)},[]),M=(e="Loading...")=>{R(e),T(!0)},V=e=>F(s=>({...s,[e]:!0})),Z=e=>F(s=>({...s,[e]:!1}));(0,a.useEffect)(()=>{(async()=>{try{let e=await d("GET","/databases");b(e),w(!0)}catch(e){w(!1),U("Cannot connect to server: "+e.message,"error")}})()},[U]);let K=(0,a.useCallback)((e,s,a)=>e.filter(e=>{let t=i(e).toLowerCase(),l=n(e).toLowerCase(),c=!s||t.includes(s)||l.includes(s)||String(e.registrationId??"").includes(s),d=r(e);return c&&(!a||d===a)}),[]);(0,a.useEffect)(()=>{p(e=>({...e,filtered:K(e.docs,O,P)}))},[O,P,K]);let Y=async e=>{if(ed(),p(s=>({...s,db:e,col:"",docs:[],filtered:[],selected:null,details:null})),N([]),k(null),e)try{let s=await d("GET",`/databases/${e}/collections`);N(s)}catch(e){U(e.message,"error")}},H=async e=>{ed(),p(s=>({...s,col:e,selected:null,docs:[]})),k(null),e&&(await X(g.db,e),await ee(g.db,e),er(g.db,e))},X=async(e,s)=>{M("Fetching records...");try{let a=(await d("GET",`/databases/${e}/collections/${s}/documents`)).map(o).sort((e,s)=>{let a=String(e.registrationId??e.regId??e.registerNumber??""),t=String(s.registrationId??s.regId??s.registerNumber??"");return a.localeCompare(t,void 0,{numeric:!0})});p(e=>({...e,docs:a,filtered:K(a,O,P)}))}catch(e){U(e.message,"error")}finally{T(!1)}},ee=async(e,s)=>{try{let a=await d("GET",`/databases/${e}/collections/${s}/stats`);k(a)}catch{}},es=async e=>{p(s=>({...s,selected:s.docs.find(s=>String(s._id)===e)??null})),M("Loading details...");try{let s=o(await d("GET",`/databases/${g.db}/collections/${g.col}/documents/${e}`));p(e=>({...e,details:s}))}catch(e){U(e.message,"error")}finally{T(!1)}},ea=async e=>{M("Generating QR & sending email...");try{await d("POST",`/databases/${g.db}/collections/${g.col}/documents/${e}/approve`),U("Approved! QR sent to attendee.","success"),await X(g.db,g.col),await ee(g.db,g.col),await es(e)}catch(e){U(e.message,"error")}finally{T(!1)}},et=async()=>{if(!B.trim())return void U("Please enter a reason","error");Z("reject"),M("Rejecting & sending email...");try{await d("POST",`/databases/${g.db}/collections/${g.col}/documents/${g.rejectTargetId}/reject`,{reason:B}),U("Rejected. Email sent to attendee.","info"),await X(g.db,g.col),await ee(g.db,g.col),g.rejectTargetId&&await es(g.rejectTargetId)}catch(e){U(e.message,"error")}finally{T(!1)}},el=async e=>{M("Loading...");try{let s=o(await d("GET",`/databases/${g.db}/collections/${g.col}/documents/${e}`));p(e=>({...e,editingDoc:s}));let a={...s};delete a._id,Object.keys(a).forEach(e=>{/screenshot|image|photo|picture|img|payment|receipt|signature|avatar|profile/i.test(e)&&c(a[e])&&(a[e]="[IMAGE DATA PRESERVED]")}),G(JSON.stringify(a,null,2)),V("doc")}catch(e){U(e.message,"error")}finally{T(!1)}},ei=async()=>{let e;try{e=JSON.parse(W)}catch(e){U("Invalid JSON: "+e.message,"error");return}g.editingDoc&&Object.keys(e).forEach(s=>{"[IMAGE DATA PRESERVED]"===e[s]&&g.editingDoc[s]&&(e[s]=g.editingDoc[s])}),Z("doc"),M("Saving...");try{g.editingDoc?(await d("PUT",`/databases/${g.db}/collections/${g.col}/documents/${String(g.editingDoc._id)}`,e),U("Document updated","success"),await es(String(g.editingDoc._id))):(await d("POST",`/databases/${g.db}/collections/${g.col}/documents`,e),U("Document created","success")),await X(g.db,g.col),await ee(g.db,g.col)}catch(e){U(e.message,"error")}finally{T(!1)}},en=async()=>{Z("delete"),M("Deleting...");try{await d("DELETE",`/databases/${g.db}/collections/${g.col}/documents/${g.deleteTargetId}`),U("Document deleted","info"),p(e=>({...e,selected:null,details:null})),await X(g.db,g.col),await ee(g.db,g.col)}catch(e){U(e.message,"error")}finally{T(!1)}},ec=async()=>{let s=await e.A(42078),a=g.docs;if(!a.length)return;let l=Object.keys(a[0]).filter(e=>!/screenshot|image|photo|picture|img|payment|receipt|signature|avatar|profile/i.test(e)),i=[l.map(t),...a.map(e=>l.map(s=>{let a=e[s];return null==a?"":"object"==typeof a?JSON.stringify(a):String(a)}))],n=s.utils.book_new();s.utils.book_append_sheet(n,s.utils.aoa_to_sheet(i),g.col.substring(0,31)),s.writeFile(n,`${g.col}_${new Date().toISOString().split("T")[0]}.xlsx`),U("Exported successfully","success")},er=(e,s)=>{L.current=setInterval(async()=>{if(e&&s)try{let a=(await d("GET",`/databases/${e}/collections/${s}/documents`)).map(o);p(e=>JSON.stringify(a.map(e=>e._id))!==JSON.stringify(e.docs.map(e=>e._id))?{...e,docs:a,filtered:K(a,O,P)}:e);let t=await d("GET",`/databases/${e}/collections/${s}/stats`).catch(()=>null);t&&k(t)}catch{}},3e4)},ed=()=>{L.current&&(clearInterval(L.current),L.current=null)};(0,a.useEffect)(()=>()=>ed(),[]);let eo=!!g.col&&g.docs.length>0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{show:$,text:E}),(0,s.jsx)(h,{toasts:A}),(0,s.jsxs)("header",{className:"header",children:[(0,s.jsxs)("div",{className:"logo",children:[(0,s.jsx)("div",{className:"logo-icon",children:(0,s.jsx)("i",{className:"fas fa-bolt"})}),"EventManager Pro"]}),(0,s.jsxs)("div",{className:"header-selects",children:[(0,s.jsxs)("select",{value:g.db,onChange:e=>Y(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Select Database"}),v.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{value:g.col,onChange:e=>H(e.target.value),disabled:!g.db,children:[(0,s.jsx)("option",{value:"",children:"Select Collection"}),y.map(e=>(0,s.jsx)("option",{value:e,children:l(e)},e))]})]}),(0,s.jsxs)("div",{className:"header-right",children:[(0,s.jsxs)("button",{className:"btn btn-ghost btn-sm",onClick:ec,disabled:!eo,children:[(0,s.jsx)("i",{className:"fas fa-download"})," Export"]}),(0,s.jsxs)("button",{className:"btn btn-primary btn-sm",onClick:()=>{p(e=>({...e,editingDoc:null})),G('{\n  "name": "",\n  "email": "",\n  "eventName": ""\n}'),V("doc")},disabled:!g.col,children:[(0,s.jsx)("i",{className:"fas fa-plus"})," Add"]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,fontSize:12,color:"var(--muted)"},children:[(0,s.jsx)("div",{className:`status-dot ${C?"connected":"disconnected"}`}),(0,s.jsx)("span",{children:C?"Connected":"Disconnected"})]})]})]}),(0,s.jsx)("nav",{className:"nav-tabs",children:["records","scanner"].map(e=>(0,s.jsxs)("button",{className:`nav-tab${I===e?" active":""}`,onClick:()=>D(e),children:[(0,s.jsx)("i",{className:`fas fa-${"records"===e?"table":"qrcode"}`}),"records"===e?"Records":"QR Scanner"]},e))}),(0,s.jsxs)("div",{className:"main",children:[(0,s.jsxs)("div",{className:`panel${"records"===I?" active":""}`,id:"panel-records",children:[(0,s.jsxs)("aside",{className:"sidebar",children:[(0,s.jsxs)("div",{className:"sidebar-head",children:[(0,s.jsx)("span",{className:"sidebar-title",children:g.col?l(g.col):"All Records"}),(0,s.jsx)("span",{className:"badge",children:g.filtered.length})]}),(0,s.jsx)("div",{style:{padding:12,borderBottom:"1px solid var(--border)",display:"flex",gap:6},children:(0,s.jsxs)("select",{value:P,onChange:e=>q(e.target.value),style:{flex:1,minWidth:0,fontSize:12,padding:"6px 10px"},children:[(0,s.jsx)("option",{value:"",children:"All Status"}),(0,s.jsx)("option",{value:"pending",children:"Pending"}),(0,s.jsx)("option",{value:"approved",children:"Approved"}),(0,s.jsx)("option",{value:"rejected",children:"Rejected"}),(0,s.jsx)("option",{value:"checked_in",children:"Checked In"})]})}),(0,s.jsx)("div",{className:"search-wrap",children:(0,s.jsx)("input",{type:"text",placeholder:"ðŸ” Search...",value:O,onChange:e=>z(e.target.value)})}),(0,s.jsx)("ul",{className:"list",children:0===g.filtered.length?(0,s.jsxs)("li",{className:"empty",children:[(0,s.jsx)("i",{className:"fas fa-inbox"}),(0,s.jsx)("br",{}),g.col?"No records found":"Select a collection"]}):g.filtered.map(e=>{let a=i(e),t=n(e),l=String(e.registrationId??e.regId??e.registerNumber??""),c=r(e),d=String(g.selected?._id)===String(e._id);return(0,s.jsxs)("li",{className:`list-item${d?" active":""}`,onClick:()=>es(String(e._id)),children:[(0,s.jsx)("div",{className:"list-item-name",children:a}),t&&(0,s.jsx)("div",{className:"list-item-sub",children:t}),(0,s.jsxs)("div",{className:"list-item-meta",children:[l?(0,s.jsxs)("span",{style:{fontSize:11,color:"var(--muted)"},children:["#",l.substring(0,10)]}):(0,s.jsx)("span",{}),(0,s.jsx)(m,{status:c})]})]},String(e._id))})})]}),(0,s.jsxs)("div",{className:"content",children:[S&&(0,s.jsx)(j,{stats:S}),g.details?(0,s.jsx)(x,{doc:g.details,onApprove:ea,onOpenReject:e=>{p(s=>({...s,rejectTargetId:e})),J(""),V("reject")},onEdit:el,onDelete:e=>{p(s=>({...s,deleteTargetId:e})),V("delete")}}):g.col?null:(0,s.jsxs)("div",{className:"placeholder",children:[(0,s.jsx)("div",{className:"placeholder-icon",children:(0,s.jsx)("i",{className:"fas fa-database"})}),(0,s.jsx)("h3",{children:"Select a collection to begin"}),(0,s.jsx)("p",{style:{fontSize:14,marginTop:8},children:"Choose a database and collection from the header"})]})]})]}),(0,s.jsx)("div",{className:`panel${"scanner"===I?" active":""}`,id:"panel-scanner",children:"scanner"===I&&(0,s.jsx)(f,{onToast:U})})]}),Q.reject&&(0,s.jsx)("div",{className:"modal-overlay open",children:(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsxs)("div",{className:"modal-title",children:[(0,s.jsx)("i",{className:"fas fa-times-circle",style:{color:"var(--red)"}})," Reject Attendee"]}),(0,s.jsx)("p",{style:{color:"var(--muted)",fontSize:14,marginBottom:20},children:"Please provide a reason for rejection. This will be emailed to the attendee."}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"Reason for Rejection *"}),(0,s.jsx)("textarea",{className:"form-input",value:B,onChange:e=>J(e.target.value),placeholder:"e.g. Registration incomplete, missing documents, event capacity reached..."})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{className:"btn btn-ghost",onClick:()=>Z("reject"),children:"Cancel"}),(0,s.jsxs)("button",{className:"btn btn-danger",onClick:et,children:[(0,s.jsx)("i",{className:"fas fa-times"})," Reject & Notify"]})]})]})}),Q.doc&&(0,s.jsx)("div",{className:"modal-overlay open",children:(0,s.jsxs)("div",{className:"modal",style:{minWidth:600},children:[(0,s.jsxs)("div",{className:"modal-title",children:[(0,s.jsx)("i",{className:`fas fa-${g.editingDoc?"edit":"plus"}`,style:{color:"var(--accent)"}}),g.editingDoc?"Edit Document":"Add Document"]}),(0,s.jsx)("p",{style:{color:"var(--muted)",fontSize:13,marginBottom:16},children:g.editingDoc?"Edit the JSON. Image fields marked [IMAGE DATA PRESERVED] will remain unchanged.":"Enter fields as JSON key-value pairs"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"JSON Data"}),(0,s.jsx)("textarea",{className:"form-input",style:{minHeight:200,fontFamily:"monospace",fontSize:13},value:W,onChange:e=>G(e.target.value)})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{className:"btn btn-ghost",onClick:()=>Z("doc"),children:"Cancel"}),(0,s.jsxs)("button",{className:"btn btn-primary",onClick:ei,children:[(0,s.jsx)("i",{className:"fas fa-save"})," Save"]})]})]})}),Q.delete&&(0,s.jsx)("div",{className:"modal-overlay open",children:(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsxs)("div",{className:"modal-title",children:[(0,s.jsx)("i",{className:"fas fa-trash",style:{color:"var(--red)"}})," Confirm Delete"]}),(0,s.jsx)("p",{style:{color:"var(--muted)",fontSize:14},children:"Are you sure you want to delete this record? This cannot be undone."}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{className:"btn btn-ghost",onClick:()=>Z("delete"),children:"Cancel"}),(0,s.jsxs)("button",{className:"btn btn-danger",onClick:en,children:[(0,s.jsx)("i",{className:"fas fa-trash"})," Delete"]})]})]})})]})}e.s(["default",()=>p])},42078,e=>{e.v(s=>Promise.all(["static/chunks/8625699381285d4a.js"].map(s=>e.l(s))).then(()=>s(70016)))},87087,e=>{e.v(s=>Promise.all(["static/chunks/1c9ffce5dd967e02.js"].map(s=>e.l(s))).then(()=>s(5003)))}]);